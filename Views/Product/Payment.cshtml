@{
    ViewData["Title"] = "구매하기";

    string kind = ViewContext.HttpContext.Request.Form["kind"];
    string price = ViewContext.HttpContext.Request.Form["price"];
}

@functions{
    async Task hourPrint()
    {
        for (var i = 0; i < 24; i++)
        {
            if (i < 10)
            {
                <option>0@(i)</option>
            }
            else
            {
                <option>@i</option>
            }
        }
    }
}

<div style="background-color: #8E8E8E; height: 70px">
    <div class="container">
        <p style="line-height: 70px; margin-left: 80px">Hospi 홈 > Windows > 구매하기</p>
    </div>
</div>

<div class="container" style="margin-top: 70px; margin-bottom: 500px">
    <form>
        <div class="form-group" style="width: 900px; margin: 0 auto;">
            <h4>병원정보 입력</h4>
            <table class="table">
                <tbody>
                    <tr>
                        <th scope="row">이름</th>
                        <td><input type="text" class="form-control" style="width: 400px" /></td>
                    </tr>
                    <tr>
                        <th scope="row">사업자등록번호</th>
                        <td><input type="text" class="form-control" style="width: 400px" /></td>
                    </tr>
                    <tr>
                        <th scope="row">병원명</th>
                        <td><input type="text" class="form-control" style="width: 400px" /></td>
                    </tr>
                    <tr>
                        <th scope="row">병원 전화번호</th>
                        <td><input type="text" class="form-control" style="width: 400px" maxlength="12" placeholder="번호만 입력해주세요." /></td>
                    </tr>
                    <tr>
                        <th scope="row">우편번호</th>
                        <td>
                            <input type="text" class="form-control" style="width: 200px; float: left; margin-right: 10px" maxlength="5" />
                            <button class="btn btn-dark">주소 찾기</button>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">주소</th>
                        <td><input type="text" class="form-control" style="width: 400px" /></td>
                    </tr>
                    <tr>
                        <th scope="row">주소 상세입력</th>
                        <td><input type="text" class="form-control" style="width: 400px" /></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="form-group" style="width: 900px; margin: 0 auto; margin-top: 50px">
            <h4>운영정보 입력</h4>
            <table class="table">
                <tbody>
                    <tr>
                        <th scope="row">평일 운영시간</th>
                        <td>
                            <b style="float: left; margin-right: 10px">Open</b>
                            <select class="form-control form-control-sm" name="weekdayOpenHour" style="float: left; width: 70px">
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" name="weekdayOpenMin" style="float: left; width: 70px">
                                <option value="00">00</option>
                                <option value="30">30</option>
                            </select>
                            <p style="float: left; margin-left: 8px; margin-right: 30px">분</p>
                            <b style="float: left; margin-right: 10px;">Close</b>
                            <select class="form-control form-control-sm" name="weekdayCloseHour" style="float: left; width: 70px">
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" name="weekdayCloseMin" style="float: left; width: 70px">
                                <option value="00">00</option>
                                <option value="30">30</option>
                            </select>
                            <p style="float: left; margin-left: 8px;">분</p>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">토요일 개원 여부</th>
                        <td>
                            <div style="margin-left: 20px">
                                <input class="form-check-input" id="saturdayClosed" type="radio" name="saturdayStatus" checked="checked" onclick="saturdayTimeSelectDisabled()" />
                                <label class="form-check-label" for="saturdayClosed" style="margin-right: 30px">휴원</label>
                                <input class="form-check-input" id="saturdayOpening" type="radio" name="saturdayStatus" onclick="saturdayTimeSelectActive()" />
                                <label class="form-check-label" for="saturdayOpening">개원</label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">토요일 운영시간</th>
                        <td>
                            <b style="float: left; margin-right: 10px;">Open</b>
                            <select class="form-control form-control-sm" id="saturdayOpenHour" name="saturdayOpenHour" style="float: left; width: 70px" disabled>
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" id="saturdayOpenMin" name="saturdayOpenMin" style="float: left; width: 70px" disabled>
                                <option value="00">00</option>
                                <option value="30">30</option>
                            </select>
                            <p style="float: left; margin-left: 8px; margin-right: 30px">분</p>
                            <b style="float: left; margin-right: 10px;">Close</b>
                            <select class="form-control form-control-sm" id="saturdayCloseHour" name="saturdayCloseHour" style="float: left; width: 70px" disabled>
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" id="saturdayCloseMin" name="saturdayCloseMin" style="float: left; width: 70px" disabled>
                                <option>00</option>
                                <option>30</option>
                            </select>
                            <p style="float: left; margin-left: 8px;">분</p>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">공휴일 개원 여부</th>
                        <td>
                            <div style="margin-left: 20px">
                                <input class="form-check-input" id="holidayClosed" type="radio" name="holidayStatus" checked="checked" onclick="holidayTimeSelectDisabled()" />
                                <label class="form-check-label" for="holidayClosed" style="margin-right: 30px">휴원</label>
                                <input class="form-check-input" id="holidayOpening" type="radio" name="holidayStatus" onclick="holidayTimeSelectActive()" />
                                <label class="form-check-label" for="holidayOpening">개원</label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">공휴일 운영시간</th>
                        <td>
                            <b style="float: left; margin-right: 10px;">Open</b>
                            <select class="form-control form-control-sm" id="holidayOpenHour" name="holidayOpenHour" style="float: left; width: 70px" disabled>
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" id="holidayOpenMin" name="holidayOpenMin" style="float: left; width: 70px" disabled>
                                <option>00</option>
                                <option>30</option>
                            </select>
                            <p style="float: left; margin-left: 8px; margin-right: 30px">분</p>
                            <b style="float: left; margin-right: 10px;">Close</b>
                            <select class="form-control form-control-sm" id="holidayCloseHour" name="holidayCloseHour" style="float: left; width: 70px" disabled>
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" id="holidayCloseMin" name="holidayCloseMin" style="float: left; width: 70px" disabled>
                                <option>00</option>
                                <option>30</option>
                            </select>
                            <p style="float: left; margin-left: 8px;">분</p>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">점심시간</th>
                        <td>
                            <select class="form-control form-control-sm" name="lunchHour" style="float: left; width: 70px">
                                @{
                                    await hourPrint();
                                }
                            </select>
                            <p style="float: left; margin-right: 10px; margin-left: 8px">시</p>
                            <select class="form-control form-control-sm" name="lunchMin" style="float: left; width: 70px">
                                <option>00</option>
                                <option>30</option>
                            </select>
                            <p style="float: left; margin-left: 8px;">분</p>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">진료과</th>
                        <td>
                            <input type="text" class="form-control" style="width: 200px; float: left; margin-right: 10px" />
                            <button class="btn btn-dark">등록</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="form-group" style="width: 900px; margin: 0 auto; margin-top: 50px;">
            <div style="width: 450px; float: left">
                <h4>결제정보 입력</h4>
                <table class="table">
                    <tr>
                        <th scope="row">카드번호</th>
                        <td>
                            <input type="password" class="form-control" style="width: 60px; float: left; margin-right: 10px " maxlength="4" />
                            <p style="float:left; margin-right: 10px">-</p>
                            <input type="password" class="form-control" style="width: 60px; float: left; margin-right: 10px " maxlength="4" />
                            <p style="float: left; margin-right: 10px">-</p>
                            <input type="password" class="form-control" style="width: 60px; float: left; margin-right: 10px " maxlength="4" />
                            <p style="float: left; margin-right: 10px">-</p>
                            <input type="password" class="form-control" style="width: 60px; float: left" maxlength="4" />
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">유효기간</th>
                        <td>
                            <input type="text" class="form-control" style="width: 50px; float: left; margin-right: 10px " placeholder="월" maxlength="2" />
                            <input type="text" class="form-control" style="width: 100px; float: left; margin-right: 10px" placeholder="년(4자리)" maxlength="4" />
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">이름</th>
                        <td><input type="text" class="form-control" style="width: 200px" /></td>
                    </tr>
                    <tr>
                        <th scope="row">생년월일</th>
                        <td>
                            <input type="text" class="form-control" style="width: 100px; float: left; margin-right: 10px" placeholder="년(4자리)" />
                            <input type="text" class="form-control" style="width: 50px; float: left; margin-right: 10px " placeholder="월" />
                            <input type="text" class="form-control" style="width: 50px; float: left" placeholder="일" />
                        </td>
                    </tr>
                </table>
            </div>
            <div style="width: 400px; margin-top:20px; float: right">
                <div>
                    <p>선택하신 플랜은 <b><u>@(kind)용</u></b>입니다.<br />@(kind)용 기능과 @(kind)규모급 DB가 제공됩니다.<br />Hospi는 구독 제품으로서 매월 결제일마다 자동결제 됩니다.</p>
                    <div>
                        <h4 style="float:left">결제금액(VAT 포함)</h4>
                        <h4 class="text-right">@price</h4>
                    </div>
                    <div style="margin-left: 20px; margin-top: 10px">
                        <input class="form-check-input" type="checkbox" id="paymentAgree" value="동의" />
                        <label class="form-check-label" for="paymentAgree">본인정보를 결제 서비스업체에 제공하는데 동의합니다.</label>
                    </div>
                </div>
                <div style="text-align: right; margin-top: 5px">
                    <button class="btn btn-dark" type="submit" style="width: 100%; height: 50px; font-size: 20px" asp-area="" asp-controller="Product" asp-action="PaymentSuccess">결제하기</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    /**
     * 개원, 휴원 선택에 따라 시간 선택을 활성화, 비활성화하는 메소드
     * */
    function saturdayTimeSelectActive() {
        document.getElementById('saturdayOpenHour').disabled = false;
        document.getElementById('saturdayOpenMin').disabled = false;
        document.getElementById('saturdayCloseHour').disabled = false;
        document.getElementById('saturdayCloseMin').disabled = false;
    }

    function saturdayTimeSelectDisabled() {
        document.getElementById('saturdayOpenHour').disabled = true;
        document.getElementById('saturdayOpenMin').disabled = true;
        document.getElementById('saturdayCloseHour').disabled = true;
        document.getElementById('saturdayCloseMin').disabled = true;
    }

    function holidayTimeSelectActive() {
        document.getElementById('holidayOpenHour').disabled = false;
        document.getElementById('holidayOpenMin').disabled = false;
        document.getElementById('holidayCloseHour').disabled = false;
        document.getElementById('holidayCloseMin').disabled = false;
    }

    function holidayTimeSelectDisabled() {
        document.getElementById('holidayOpenHour').disabled = true;
        document.getElementById('holidayOpenMin').disabled = true;
        document.getElementById('holidayCloseHour').disabled = true;
        document.getElementById('holidayCloseMin').disabled = true;
    }
</script>